<div class="border rounded-lg border-gray-400 p-4">
  <div class="p-2 rounded-md flex flex-col">
    <!-- TODO: modifier cet affichage pour que ça soit mieux intégré et par composant -->
    <div *ngIf="!disableInteraction" class="mb-4">
      <button class="text-blue-500" (click)="toggleSelectAll()">
        Tout {{ selectAll ? "désélectionner" : "sélectionner" }}
      </button>
    </div>

    <p class="text-center flex-1 text-gray-500" *ngIf="milestones.length === 0">
      Aucune milestone {{ disableInteraction ? "selectionnée" : "trouvée" }}
    </p>
    <span *ngIf="!disableInteraction" class="mb-2">Dernières milestones</span>
    <ul class="flex flex-col gap-2 list-none">
      <li class="flex items-center gap-2" *ngFor="let milestone of milestones">
        <!-- TODO: faire un composant pour afficher les milestones entries -->
        <div
          class="p-2 border rounded-lg bg-gray-100 flex gap-2 w-full items-center justify-between"
        >
          <label class="flex flex-1 items-center">
            <input
              *ngIf="!disableInteraction"
              type="checkbox"
              class="mr-2"
              [checked]="isSelected(milestone)"
              (change)="toggleMilestone(milestone)"
            />
            <span class="font-medium text-gray-700">{{ milestone.title }}</span>
            <span
              class="rounded-full px-2 py-[2px] text-xs font-semibold ms-2"
              [ngClass]="{
                'bg-red-300 text-red-800': milestone.state == 'closed',
                'bg-green-300 text-green-800': milestone.state == 'active'
              }"
            >
              {{ milestone.state === "closed" ? "Fermée" : "Ouverte" }}
            </span>
          </label>

          <a
            class="text-xs font-semibold underline text-blue-500 rounded-full"
            href="{{ getMilestoneURL(milestone) }}"
            target="_blank"
          >
            Ouvrir sur Gitlab
          </a>
        </div>
      </li>
    </ul>
    <div *ngIf="!disableInteraction" class="mt-2">
      <span *ngIf="lastClosedMilestones.length > 0">Anciennes versions</span>
      <ul class="flex flex-col gap-2 list-none mt-2">
        <li
          class="flex items-center gap-2"
          *ngFor="let milestone of lastClosedMilestones"
        >
          <app-old-milestone-action-choice
            class="w-full"
            [milestone]="milestone"
          ></app-old-milestone-action-choice>
        </li>
      </ul>
    </div>
  </div>
</div>
